{% extends "base.html" %}
{% block title %}Index{% endblock %}
{% import "bootstrap/wtf.html" as wtf %}



{% block content %}
<div class="div-3"></div>
<div class="container-fluid">
  <div class="col col-md-8 mx-auto">
    <div class="row">
      <div class="col-lg-7">
        <img class="image-centered" src="{{ url_for('.download', filename=event.image) }}">
      </div>
      <div class="col-lg-5">
        <div class="centered">
          <h4>{{ event.title }}</h4>
          <p class="mylead text-muted">SUNCORP STADIUM - BRISBANE 2021</p>
        </div>
        <div class="row">
          <div class="col">
            <p>Location:</p>
          </div>
          <div class="col">
            <p>{{ event.address }}</p>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p>Time:</p>
          </div>
          <div class="col">
            <p>Wednesday, June 9</p>
            <p>{{ event.start_time.strftime("%I:%M %p") }} - {{ event.end_time.strftime("%I:%M %p") }}</p>
          </div>
        </div>
        
        <br>
        
        <div class="row">
          <div class="col">
            <p>Price:</p>
          </div>
          <div class="col">
            <p>${{ event.price }}</p>
          </div>
        </div>
        
        <div class="row">
          <div class="col">
            <p>Status:</p>
          </div>
          <div class="col">
            <p>{{ event.status }}</p>
          </div>
        </div>
        {% if current_user.is_authenticated %}
        <button type="button" data-bs-toggle="modal" data-bs-target="#ticketmodal"
        class="btn btn-success float-right">Book ticket</button>
        {% else %}
        <form action="{{ url_for('auth.login', next=url_for(request.endpoint,**request.view_args)) }}" method="post">
          {{ form.csrf_token()}}
          <button type="submit" class="btn btn-success float-right">Login to book ticket</button>
        </form>
        {% endif %}
      </div>
    </div>
    
    
    
    
    
    <div class="div-2"></div>
    <h3 class="mytitle centered">About</h3>
    <div class="div-2"></div>
    
    <p>
      {{ event.description }}
    </p>
    
    <div class="div-3"></div>
    <h2 class="mytitle">Comment</h2>
    <hr>
    
    
    <form action="" method="post" class="form">
      {{ form.csrf_token }}
      <div class="form-group">
        {{ wtf.form_field(form.text, class='form-control', style='resize: none', rows='5', placeholder='Say something...') }}
        <button class="btn btn-primary btn-lg float-right mt-1" type="submit">Post</button>
      </div>
      <div class="div-3"></div>
    </form>

    
    <hr>

    {% for comment in event.comments %}
    <div class="comment-container">
      <p>
        <img src="{{ url_for('static', filename='img/user_circle.png') }}" width="40" height="40">
        {{ comment.user.username }}
        <span class="text-muted">
          {{ comment.date_of_creation.strftime("%d/%m/%Y") }}
        </span>
      </p>
      <p class="comment-text">{{ comment.text }}</p>
    </div>
    {% endfor %}
  </div>
</div>



<!-- Book ticket modal -->
<div class="modal fade" id="ticketmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
aria-hidden="true">
<div class="modal-dialog modal-dialog-centered" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <div>
        <h4>State of origin game 1</h4>
        <p class="mylead text-muted">SUCORP STADIUM - BRISBANE 2021</p>
      </div>
      <button type="button" class="btn-close" aria-label="Close" data-bs-dismiss="modal">
      </div>
      <div class="modal-body">
        <h5>Adult ticket</h5>
        <div class="d-flex">
          <p class="mylead text-muted">A$89.95 incl. A$5.00 Tax</p>
          <div class="div-1"></div>
          <p class="mylead text-muted">Remain tickets: 15</p>
        </div>
        <form>
          <div class="form-group row">
            <label for="qty" class="col-2 col-form-label">Quantity:</label>
            <div class="col-5">
              <input type="number" class="form-control" min="0" max="15">
            </div>
          </div>
          <button type="submit" class="btn btn-success float-right">Checkout</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}